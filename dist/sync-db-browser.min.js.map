{"version":3,"sources":["sync-db-browser.min.js"],"names":["e","exports","module","define","amd","f","window","global","self","SyncDB","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"IDBDriver","createSync","name","url","driver","TypeError","undefined","RangeError","sync-db","sync-db-idb",2,"EventEmitter","this","_events","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","prototype","defaultMaxListeners","setMaxListeners","isNaN","emit","type","er","handler","len","args","listeners","error","arguments","Array","apply","slice","addListener","listener","m","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","emitter",3,"Object","create","ctor","superCtor","super_","constructor","value","enumerable","writable","configurable","TempCtor",4,"drainQueue","draining","currentQueue","queue","noop","process","nextTick","fun","setTimeout","title","browser","env","argv","version","versions","off","binding","cwd","chdir","dir","umask",5,"copy","fill","readUInt8",6,"inspect","obj","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","str","styleType","style","styles","arrayToHash","array","hash","forEach","val","idx","recurseTimes","isString","primitive","formatPrimitive","keys","visibleKeys","getOwnPropertyNames","isError","indexOf","formatError","isRegExp","RegExp","toString","isDate","Date","base","braces","isArray","toUTCString","output","formatArray","map","formatProperty","pop","reduceToSingleString","simple","JSON","stringify","replace","isNull","hasOwnProperty","String","match","desc","getOwnPropertyDescriptor","get","set","split","line","join","substr","numLinesEst","reduce","prev","cur","ar","isNullOrUndefined","isSymbol","re","objectToString","d","isPrimitive","pad","timestamp","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","prop","formatRegExp","format","objects","x","Number","_","deprecate","fn","msg","deprecated","throwDeprecation","traceDeprecation","noDeprecation","debugEnviron","debugs","debuglog","NODE_DEBUG","toUpperCase","test","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","number","boolean","null","string","date","regexp","isBuffer","log","inherits","origin","add","./support/isBuffer","_process",7,"dbName","_db","_name","OBJECT_STORE_DATA","init","Promise","resolve","reject","openRequest","indexedDB","open","onerror","onsuccess","result","onupgradeneeded","event","db","target","objectStore","createObjectStore","keyPath","createIndex","insert","transaction","oncomplete","put","getData","request","openCursor","cursor","getLastSeq","index","seqid",8,"isHost","serialize","pairs","encodeURIComponent","parseString","parts","pair","decodeURIComponent","parseHeader","field","lines","fields","toLowerCase","trim","shift","params","Response","req","options","xhr","text","method","responseType","responseText","statusText","setStatusProperties","status","header","headers","getAllResponseHeaders","getResponseHeader","setHeaderProperties","body","parseBody","response","Request","Emitter","_query","_header","err","res","parse","original","callback","new_err","end","root","getXHR","XMLHttpRequest","location","protocol","ActiveXObject","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","ct","statusType","info","ok","clientError","serverError","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","use","timeout","ms","_timeout","clearTimeout","_timer","abort","aborted","unset","getHeader","accept","auth","user","pass","btoa","query","_formData","FormData","append","attach","file","filename","send","data","_data","_callback","crossDomainError","crossDomain","timeoutError","withCredentials","_withCredentials","onreadystatechange","readyState","timedout","handleProgress","total","percent","loaded","hasListeners","onprogress","upload","setRequestHeader","head","del","patch","post",9,"mixin","addEventListener","_callbacks","removeEventListener","callbacks","cb",10,"arr","initial","curr",11,"_driver","_url","_exec","Sync","sync","remove","exec","then","./sync",12,"_seqid","_inserted","_limit","_promise","_start","bind","Util","agent","id","infoUrl","_fetch","resInfo","inserted","events","superagent","util"],"mappings":"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","file":"sync-db-browser.min.js","sourcesContent":["/**\n * sync-db-browser - Browserified version of SyncDB bundled with IndexedDB driver\n * @version v0.0.1\n * @link https://github.com/cheminfo/sync-db-browser#readme\n * @license MIT\n */\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.SyncDB=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar SyncDB = exports.SyncDB = require('sync-db');\nvar IDBDriver = exports.IDBDriver = require('sync-db-idb');\n\nexports.createSync = function (name, url, driver) {\n    if (typeof name !== 'string')\n        throw new TypeError('name argument must be a string');\n    if (driver === undefined)\n        driver = 'idb';\n    if (driver !== 'idb')\n        throw new RangeError('only \"idb\" is supported as a driver');\n    return new SyncDB({\n        driver: new IDBDriver(name),\n        url: url\n    });\n};\n\n},{\"sync-db\":11,\"sync-db-idb\":7}],2:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],3:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],4:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],5:[function(require,module,exports){\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n},{}],6:[function(require,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./support/isBuffer\":5,\"_process\":4,\"inherits\":3}],7:[function(require,module,exports){\n'use strict';\n\nvar OBJECT_STORE_DATA = 'syncdb-data';\n\nfunction IDBDriver(dbName) {\n    if (typeof dbName !== 'string')\n        throw new TypeError('dbName argument must be a string');\n\n    this._db = null;\n    this._name = dbName;\n}\n\nIDBDriver.prototype.init = function () {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n        var openRequest = window.indexedDB.open(self._name, 1);\n        openRequest.onerror = reject;\n        openRequest.onsuccess = function () {\n            self._db = openRequest.result;\n            resolve();\n        };\n        openRequest.onupgradeneeded = function (event) {\n            var db = event.target.result;\n            var objectStore = db.createObjectStore(OBJECT_STORE_DATA, {keyPath: 'id'});\n            objectStore.createIndex('seqid', 'seqid');\n        };\n    });\n};\n\nIDBDriver.prototype.insert = function (obj) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n        var transaction = self._db.transaction(OBJECT_STORE_DATA, 'readwrite');\n        transaction.oncomplete = resolve;\n        transaction.onerror = function () {\n            reject(transaction.error);\n        };\n        var objectStore = transaction.objectStore(OBJECT_STORE_DATA);\n        objectStore.put(obj);\n    });\n};\n\nIDBDriver.prototype.getData = function () {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n        var result = [];\n        var transaction = self._db.transaction(OBJECT_STORE_DATA, 'readonly');\n        transaction.oncomplete = function () {\n            resolve(result);\n        };\n        transaction.onerror = function () {\n            reject(transaction.error);\n        };\n        var objectStore = transaction.objectStore(OBJECT_STORE_DATA);\n        var request = objectStore.openCursor();\n        request.onsuccess = function (event) {\n            var cursor = event.target.result;\n            if (cursor) {\n                result.push(cursor.value);\n                cursor.continue();\n            }\n        };\n    });\n};\n\nIDBDriver.prototype.getLastSeq = function () {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n        var transaction = self._db.transaction(OBJECT_STORE_DATA, 'readonly');\n        transaction.onerror = function () {\n            reject(transaction.error);\n        };\n        var objectStore = transaction.objectStore(OBJECT_STORE_DATA);\n        var index = objectStore.index('seqid');\n        index.openCursor(null, 'prev').onsuccess = function (event) {\n            var cursor = event.target.result;\n            if (cursor) {\n                resolve(cursor.value.seqid);\n            } else {\n                resolve(0);\n            }\n        };\n    });\n};\n\nmodule.exports = IDBDriver;\n\n},{}],8:[function(require,module,exports){\n/**\n * Module dependencies.\n */\n\nvar Emitter = require('emitter');\nvar reduce = require('reduce');\n\n/**\n * Root reference for iframes.\n */\n\nvar root = 'undefined' == typeof window\n  ? (this || self)\n  : window;\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  return false;\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    if (null != obj[key]) {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(obj[key]));\n    }\n  }\n  return pairs.join('&');\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var parts;\n  var pair;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    parts = pair.split('=');\n    obj[decodeURIComponent(parts[0])] = decodeURIComponent(parts[1]);\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return reduce(str.split(/ *; */), function(obj, str){\n    var parts = str.split(/ *= */)\n      , key = parts.shift()\n      , val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this.setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this.setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this.parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype.setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype.parseBody = function(str){\n  var parse = request.parse[this.type];\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype.setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  Emitter.call(this);\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {};\n  this._header = {};\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    if (err) {\n      return self.callback(err, res);\n    }\n\n    if (res.status >= 200 && res.status < 300) {\n      return self.callback(err, res);\n    }\n\n    var new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n    new_err.original = err;\n    new_err.response = res;\n    new_err.status = res.status;\n\n    self.callback(err || new_err, res);\n  });\n}\n\n/**\n * Mixin `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Allow for extension\n */\n\nRequest.prototype.use = function(fn) {\n  fn(this);\n  return this;\n}\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.timeout = function(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.clearTimeout = function(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  if (this.aborted) return;\n  this.aborted = true;\n  this.xhr.abort();\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Get case-insensitive header `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api private\n */\n\nRequest.prototype.getHeader = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass){\n  var str = btoa(user + ':' + pass);\n  this.set('Authorization', 'Basic ' + str);\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Write the field `name` and `val` for \"multipart/form-data\"\n * request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n * ```\n *\n * @param {String} name\n * @param {String|Blob|File} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.field = function(name, val){\n  if (!this._formData) this._formData = new root.FormData();\n  this._formData.append(name, val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach(new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  if (!this._formData) this._formData = new root.FormData();\n  this._formData.append(field, file, filename);\n  return this;\n};\n\n/**\n * Send `data`, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // querystring\n *       request.get('/search')\n *         .end(callback)\n *\n *       // multiple data \"writes\"\n *       request.get('/search')\n *         .send({ search: 'query' })\n *         .send({ range: '1..5' })\n *         .send({ order: 'desc' })\n *         .end(callback)\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"})\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n  *      request.post('/user')\n  *        .send('name=tobi')\n  *        .send('species=ferret')\n  *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.send = function(data){\n  var obj = isObject(data);\n  var type = this.getHeader('Content-Type');\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    if (!type) this.type('form');\n    type = this.getHeader('Content-Type');\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || isHost(data)) return this;\n  if (!type) this.type('json');\n  return this;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Origin is not allowed by Access-Control-Allow-Origin');\n  err.crossDomain = true;\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype.timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nRequest.prototype.withCredentials = function(){\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var query = this._query.join('&');\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self.timeoutError();\n      if (self.aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(e){\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    xhr.onprogress = handleProgress;\n  }\n  try {\n    if (xhr.upload && this.hasListeners('progress')) {\n      xhr.upload.onprogress = handleProgress;\n    }\n  } catch(e) {\n    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n    // Reported here:\n    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  if (query) {\n    query = request.serializeObject(query);\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n\n  // initiate request\n  xhr.open(this.method, this.url, true);\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !isHost(data)) {\n    // serialize stuff\n    var serialize = request.serialize[this.getHeader('Content-Type')];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  // send stuff\n  this.emit('request', this);\n  xhr.send(data);\n  return this;\n};\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new Request('GET', method).end(url);\n  }\n\n  // url first\n  if (1 == arguments.length) {\n    return new Request('GET', method);\n  }\n\n  return new Request(method, url);\n}\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.del = function(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} data\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} data\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * Expose `request`.\n */\n\nmodule.exports = request;\n\n},{\"emitter\":9,\"reduce\":10}],9:[function(require,module,exports){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n},{}],10:[function(require,module,exports){\n\n/**\n * Reduce `arr` with `fn`.\n *\n * @param {Array} arr\n * @param {Function} fn\n * @param {Mixed} initial\n *\n * TODO: combatible error handling?\n */\n\nmodule.exports = function(arr, fn, initial){  \n  var idx = 0;\n  var len = arr.length;\n  var curr = arguments.length == 3\n    ? initial\n    : arr[idx++];\n\n  while (idx < len) {\n    curr = fn.call(null, curr, arr[idx], ++idx, arr);\n  }\n  \n  return curr;\n};\n},{}],11:[function(require,module,exports){\n'use strict';\n\nvar Sync = require('./sync');\n\nfunction SyncDB(options) {\n    if (!(this instanceof SyncDB)) {\n        return new SyncDB(options);\n    }\n\n    if (typeof options !== 'object' || options === null) {\n        throw new TypeError('options argument must be an object');\n    }\n    if (typeof options.driver !== 'object') {\n        throw new TypeError('driver option must be an object');\n    }\n\n    this._driver = options.driver;\n    this._url = options.url ? options.url : '';\n\n    this._exec = null;\n}\n\nSyncDB.prototype.sync = function () {\n    if (this._exec) {\n        return this._exec;\n    }\n    var exec = new Sync(this._driver, this._url);\n    this._exec = exec;\n\n    var self = this;\n\n    function remove() {\n        self._exec = null;\n    }\n\n    exec.then(remove);\n    return exec;\n};\n\nmodule.exports = SyncDB;\n\n},{\"./sync\":12}],12:[function(require,module,exports){\n'use strict';\n\nvar Util = require('util');\nvar EventEmitter = require('events').EventEmitter;\n\nvar agent = require('superagent');\n\nfunction Sync(driver, url) {\n    EventEmitter.call(this);\n    this._driver = driver;\n    this._url = url;\n    this._seqid = 0;\n    this._inserted = 0;\n    this._limit = 5;\n    var self = this;\n    this._promise = driver.init().then(function () {\n        return self._start();\n    });\n    this._promise.catch(function (e) {\n        self.emit('error', e);\n    });\n    this.then = this._promise.then.bind(this._promise);\n}\n\nUtil.inherits(Sync, EventEmitter);\n\nSync.prototype._start = function () {\n    var self = this;\n    return this._driver.getLastSeq().then(function (id) {\n        return new Promise(function (resolve, reject) {\n            self._seqid = id;\n            var infoUrl = self._url + '/info?since=' + id;\n            agent.get(infoUrl).end(function (err, result) {\n                if (err) return reject(err);\n                self.emit('progress', {\n                    type: 'info',\n                    value: result.body\n                });\n                self._fetch(resolve, reject);\n            });\n        });\n    });\n};\n\nSync.prototype._fetch = function (resolve, reject) {\n    var self = this;\n    var url = this._url + '?since=' + this._seqid + '&limit=' + this._limit;\n    agent.get(url).end(function (err, response) {\n        if (err) return reject(err);\n        var result = response.body.data;\n        var i = 0;\n        insert();\n\n        function insert() {\n            if (result.length > i) {\n                var res = result[i++];\n                self._driver.insert(res).then(function () {\n                    self._seqid = res.seqid;\n                    self._inserted++;\n                    self.emit('progress', {\n                        type: 'insert',\n                        value: res.value\n                    });\n                    insert();\n                }, reject);\n            } else if (result.length === 0) {\n                var resInfo = {\n                    inserted: self._inserted\n                };\n                self.emit('end', resInfo);\n                resolve(resInfo);\n            } else {\n                self._fetch(resolve, reject);\n            }\n        }\n    });\n};\n\nmodule.exports = Sync;\n\n},{\"events\":2,\"superagent\":8,\"util\":6}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}